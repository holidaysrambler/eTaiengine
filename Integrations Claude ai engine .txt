Core UI Integration Modal with Dark Purple Theme


components/integrations/IntegrationModal.tsx


```tsx
'use client';


import { useState, useEffect } from 'react';
import { X, Sparkles, Zap, Code, Eye, Copy, Check } from 'lucide-react';


interface IntegrationModalProps {
Â  isOpen: boolean;
Â  onClose: () => void;
Â  onIntegrationAdded: (integration: any) => void;
}


export function IntegrationModal({ isOpen, onClose, onIntegrationAdded }: IntegrationModalProps) {
Â  const [activeTab, setActiveTab] = useState<'api' | 'preview' | 'code'>('api');
Â  const [apiEndpoint, setApiEndpoint] = useState('');
Â  const [jsonResponse, setJsonResponse] = useState('');
Â  const [uiInstruction, setUiInstruction] = useState('');
Â  const [isGenerating, setIsGenerating] = useState(false);
Â  const [copiedField, setCopiedField] = useState<string | null>(null);
Â  const [parsedResponse, setParsedResponse] = useState<any>(null);


Â  // Sample API templates for quick start
Â  const apiTemplates = [
Â  Â  {
Â  Â  Â  name: 'Weather API',
Â  Â  Â  endpoint: 'https://api.openweathermap.org/data/2.5/weather?q=London&appid=YOUR_API_KEY',
Â  Â  Â  response: JSON.stringify({
Â  Â  Â  Â  weather: [{ main: 'Clear', description: 'clear sky', icon: '01d' }],
Â  Â  Â  Â  main: { temp: 15.5, feels_like: 14.8, humidity: 65 },
Â  Â  Â  Â  name: 'London'
Â  Â  Â  }, null, 2)
Â  Â  },
Â  Â  {
Â  Â  Â  name: 'News API',
Â  Â  Â  endpoint: 'https://newsapi.org/v2/top-headlines?country=us&apiKey=YOUR_API_KEY',
Â  Â  Â  response: JSON.stringify({
Â  Â  Â  Â  articles: [
Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  title: 'Breaking News',
Â  Â  Â  Â  Â  Â  description: 'Important news story',
Â  Â  Â  Â  Â  Â  url: 'https://example.com',
Â  Â  Â  Â  Â  Â  publishedAt: '2024-01-01T00:00:00Z'
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  ]
Â  Â  Â  }, null, 2)
Â  Â  }
Â  ];


Â  const copyToClipboard = async (text: string, field: string) => {
Â  Â  await navigator.clipboard.writeText(text);
Â  Â  setCopiedField(field);
Â  Â  setTimeout(() => setCopiedField(null), 2000);
Â  };


Â  const handleJsonChange = (value: string) => {
Â  Â  setJsonResponse(value);
Â  Â  try {
Â  Â  Â  const parsed = JSON.parse(value);
Â  Â  Â  setParsedResponse(parsed);
Â  Â  } catch {
Â  Â  Â  setParsedResponse(null);
Â  Â  }
Â  };


Â  const handleIntegrate = async () => {
Â  Â  setIsGenerating(true);
Â  Â Â 
Â  Â  // Simulate API processing with animation
Â  Â  await new Promise(resolve => setTimeout(resolve, 1500));
Â  Â Â 
Â  Â  const integration = {
Â  Â  Â  id: `integration-${Date.now()}`,
Â  Â  Â  endpoint: apiEndpoint,
Â  Â  Â  response: parsedResponse,
Â  Â  Â  instruction: uiInstruction,
Â  Â  Â  component: generateComponentCode(apiEndpoint, parsedResponse),
Â  Â  Â  createdAt: new Date().toISOString()
Â  Â  };
Â  Â Â 
Â  Â  onIntegrationAdded(integration);
Â  Â  setIsGenerating(false);
Â  Â  onClose();
Â  Â Â 
Â  Â  // Reset form
Â  Â  setApiEndpoint('');
Â  Â  setJsonResponse('');
Â  Â  setUiInstruction('');
Â  };


Â  const generateComponentCode = (endpoint: string, response: any) => {
Â  Â  return `
// Auto-generated API Integration Component
import { useState, useEffect } from 'react';


export function APIIntegration() {
Â  const [data, setData] = useState(null);
Â  const [loading, setLoading] = useState(true);
Â  const [error, setError] = useState(null);


Â  useEffect(() => {
Â  Â  const fetchData = async () => {
Â  Â  Â  try {
Â  Â  Â  Â  const response = await fetch('${endpoint}');
Â  Â  Â  Â  const result = await response.json();
Â  Â  Â  Â  setData(result);
Â  Â  Â  } catch (err) {
Â  Â  Â  Â  setError(err.message);
Â  Â  Â  } finally {
Â  Â  Â  Â  setLoading(false);
Â  Â  Â  }
Â  Â  };
Â  Â Â 
Â  Â  fetchData();
Â  }, []);


Â  if (loading) return <div className="loading-spinner">Loading...</div>;
Â  if (error) return <div className="error-message">Error: {error}</div>;
Â Â 
Â  return (
Â  Â  <div className="api-integration">
Â  Â  Â  {/* Dynamic content based on API response */}
Â  Â  Â  ${response ? Object.keys(response).map(key =>Â 
Â  Â  Â  Â  `<div key="${key}" className="data-field">
Â  Â  Â  Â  Â  <strong>${key}:</strong> {data?.${key}}
Â  Â  Â  Â  </div>`
Â  Â  Â  ).join('\n ') : '<!-- No data structure -->'}
Â  Â  </div>
Â  );
}
Â  Â  `.trim();
Â  };


Â  // Animation variants
Â  const modalVariants = {
Â  Â  hidden: {Â 
Â  Â  Â  opacity: 0,Â 
Â  Â  Â  scale: 0.8,
Â  Â  Â  y: 20
Â  Â  },
Â  Â  visible: {Â 
Â  Â  Â  opacity: 1,Â 
Â  Â  Â  scale: 1,
Â  Â  Â  y: 0,
Â  Â  Â  transition: {
Â  Â  Â  Â  type: "spring",
Â  Â  Â  Â  damping: 25,
Â  Â  Â  Â  stiffness: 300
Â  Â  Â  }
Â  Â  },
Â  Â  exit: {
Â  Â  Â  opacity: 0,
Â  Â  Â  scale: 0.8,
Â  Â  Â  y: -20,
Â  Â  Â  transition: {
Â  Â  Â  Â  duration: 0.2
Â  Â  Â  }
Â  Â  }
Â  };


Â  if (!isOpen) return null;


Â  return (
Â  Â  <div className="fixed inset-0 z-50 flex items-center justify-center">
Â  Â  Â  {/* Backdrop with blur and purple tint */}
Â  Â  Â  <divÂ 
Â  Â  Â  Â  className="absolute inset-0 bg-black/60 backdrop-blur-sm"
Â  Â  Â  Â  onClick={onClose}
Â  Â  Â  />
Â  Â  Â Â 
Â  Â  Â  {/* Modal Container */}
Â  Â  Â  <divÂ 
Â  Â  Â  Â  className="relative w-full max-w-4xl mx-4 bg-gradient-to-br from-gray-900 to-purple-900/20 border border-purple-500/30 rounded-2xl shadow-2xl overflow-hidden"
Â  Â  Â  Â  style={{
Â  Â  Â  Â  Â  animation: 'modalEnter 0.3s ease-out'
Â  Â  Â  Â  }}
Â  Â  Â  >
Â  Â  Â  Â  {/* Header */}
Â  Â  Â  Â  <div className="relative p-6 border-b border-purple-500/20 bg-gradient-to-r from-purple-900/40 to-transparent">
Â  Â  Â  Â  Â  <div className="flex items-center justify-between">
Â  Â  Â  Â  Â  Â  <div className="flex items-center space-x-3">
Â  Â  Â  Â  Â  Â  Â  <div className="p-2 bg-purple-600/20 rounded-lg">
Â  Â  Â  Â  Â  Â  Â  Â  <Sparkles className="w-6 h-6 text-purple-400" />
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-2xl font-bold bg-gradient-to-r from-purple-200 to-pink-200 bg-clip-text text-transparent">
Â  Â  Â  Â  Â  Â  Â  Â  Â  API Integration
Â  Â  Â  Â  Â  Â  Â  Â  </h2>
Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-purple-300/80 text-sm mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Connect external services and data sources
Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  onClick={onClose}
Â  Â  Â  Â  Â  Â  Â  className="p-2 hover:bg-purple-500/20 rounded-lg transition-all duration-200 group"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  <X className="w-5 h-5 text-purple-300 group-hover:text-purple-100" />
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>


Â  Â  Â  Â  {/* Tab Navigation */}
Â  Â  Â  Â  <div className="flex border-b border-purple-500/20 bg-gray-900/50">
Â  Â  Â  Â  Â  {[
Â  Â  Â  Â  Â  Â  { id: 'api' as const, label: 'API Configuration', icon: Zap },
Â  Â  Â  Â  Â  Â  { id: 'preview' as const, label: 'Data Preview', icon: Eye },
Â  Â  Â  Â  Â  Â  { id: 'code' as const, label: 'Generated Code', icon: Code }
Â  Â  Â  Â  Â  ].map(({ id, label, icon: Icon }) => (
Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  key={id}
Â  Â  Â  Â  Â  Â  Â  onClick={() => setActiveTab(id)}
Â  Â  Â  Â  Â  Â  Â  className={`flex items-center space-x-2 px-6 py-4 border-b-2 transition-all duration-200 ${
Â  Â  Â  Â  Â  Â  Â  Â  activeTab === id
Â  Â  Â  Â  Â  Â  Â  Â  Â  ? 'border-purple-400 text-purple-100 bg-purple-500/10'
Â  Â  Â  Â  Â  Â  Â  Â  Â  : 'border-transparent text-purple-300/70 hover:text-purple-200 hover:bg-purple-500/5'
Â  Â  Â  Â  Â  Â  Â  }`}
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  <Icon className="w-4 h-4" />
Â  Â  Â  Â  Â  Â  Â  <span className="font-medium">{label}</span>
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  </div>


Â  Â  Â  Â  {/* Content Area */}
Â  Â  Â  Â  <div className="p-6 max-h-[60vh] overflow-y-auto">
Â  Â  Â  Â  Â  {/* API Configuration Tab */}
Â  Â  Â  Â  Â  {activeTab === 'api' && (
Â  Â  Â  Â  Â  Â  <div className="space-y-6">
Â  Â  Â  Â  Â  Â  Â  {/* Quick Templates */}
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-purple-200 mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Quick Start Templates
Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-2 gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  {apiTemplates.map((template, index) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={index}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setApiEndpoint(template.endpoint);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setJsonResponse(template.response);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="p-3 text-left bg-purple-500/10 border border-purple-500/30 rounded-lg hover:bg-purple-500/20 transition-all duration-200 group"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-purple-100 font-medium group-hover:text-white">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {template.name}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Copy className="w-4 h-4 text-purple-400 group-hover:text-purple-300" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>


Â  Â  Â  Â  Â  Â  Â  {/* API Endpoint */}
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-purple-200">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  API Endpoint URL
Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  {apiEndpoint && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => copyToClipboard(apiEndpoint, 'endpoint')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="flex items-center space-x-1 text-xs text-purple-400 hover:text-purple-300 transition-colors"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {copiedField === 'endpoint' ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Check className="w-3 h-3" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Copy className="w-3 h-3" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Copy</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  type="text"
Â  Â  Â  Â  Â  Â  Â  Â  Â  value={apiEndpoint}
Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={(e) => setApiEndpoint(e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="https://api.example.com/v1/data?param=value"
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full px-4 py-3 bg-gray-800/50 border border-purple-500/30 rounded-lg text-purple-100 placeholder-purple-400/60 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-transparent transition-all duration-200"
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  </div>


Â  Â  Â  Â  Â  Â  Â  {/* Sample Response */}
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-purple-200">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Sample JSON Response
Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  {jsonResponse && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => copyToClipboard(jsonResponse, 'response')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="flex items-center space-x-1 text-xs text-purple-400 hover:text-purple-300 transition-colors"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {copiedField === 'response' ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Check className="w-3 h-3" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Copy className="w-3 h-3" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Copy</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <textarea
Â  Â  Â  Â  Â  Â  Â  Â  Â  value={jsonResponse}
Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={(e) => handleJsonChange(e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder='{"key": "value", "data": [...]}'
Â  Â  Â  Â  Â  Â  Â  Â  Â  rows={8}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full px-4 py-3 bg-gray-800/50 border border-purple-500/30 rounded-lg text-purple-100 placeholder-purple-400/60 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-transparent transition-all duration-200 font-mono text-sm"
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  </div>


Â  Â  Â  Â  Â  Â  Â  {/* UI Instructions */}
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label className="block text-sm font-medium text-purple-200 mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  UI Integration Instructions
Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  <textarea
Â  Â  Â  Â  Â  Â  Â  Â  Â  value={uiInstruction}
Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={(e) => setUiInstruction(e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="Describe how this data should be displayed... (e.g., 'Show as a grid of cards on the homepage')"
Â  Â  Â  Â  Â  Â  Â  Â  Â  rows={3}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full px-4 py-3 bg-gray-800/50 border border-purple-500/30 rounded-lg text-purple-100 placeholder-purple-400/60 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-transparent transition-all duration-200"
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  )}


Â  Â  Â  Â  Â  {/* Data Preview Tab */}
Â  Â  Â  Â  Â  {activeTab === 'preview' && parsedResponse && (
Â  Â  Â  Â  Â  Â  <div className="space-y-4">
Â  Â  Â  Â  Â  Â  Â  <div className="p-4 bg-green-500/10 border border-green-500/30 rounded-lg">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center space-x-2 text-green-400">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <Check className="w-4 h-4" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-sm font-medium">Valid JSON Structure Detected</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  <div className="bg-gray-800/30 border border-purple-500/20 rounded-lg overflow-hidden">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="px-4 py-2 bg-gray-900/50 border-b border-purple-500/20">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="text-purple-200 font-medium">Data Structure Preview</h3>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <pre className="p-4 text-purple-100 text-sm overflow-x-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  {JSON.stringify(parsedResponse, null, 2)}
Â  Â  Â  Â  Â  Â  Â  Â  </pre>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-2 gap-4 text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="p-3 bg-purple-500/10 rounded-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-purple-400">Root Keys</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-purple-100 font-mono mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {Object.keys(parsedResponse).join(', ')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="p-3 bg-purple-500/10 rounded-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-purple-400">Data Type</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-purple-100 font-mono mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {Array.isArray(parsedResponse) ? 'Array' : 'Object'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  )}


Â  Â  Â  Â  Â  {/* Generated Code Tab */}
Â  Â  Â  Â  Â  {activeTab === 'code' && apiEndpoint && (
Â  Â  Â  Â  Â  Â  <div className="space-y-4">
Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="text-purple-200 font-medium">Generated React Component</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => copyToClipboard(generateComponentCode(apiEndpoint, parsedResponse), 'code')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="flex items-center space-x-2 px-3 py-1 bg-purple-500/20 border border-purple-500/30 rounded-lg text-purple-300 hover:text-purple-100 hover:bg-purple-500/30 transition-all duration-200"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  {copiedField === 'code' ? (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Check className="w-4 h-4" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Copy className="w-4 h-4" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-sm">Copy Code</span>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  <div className="bg-gray-900/50 border border-purple-500/20 rounded-lg overflow-hidden">
Â  Â  Â  Â  Â  Â  Â  Â  <pre className="p-4 text-purple-100 text-sm overflow-x-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <code>{generateComponentCode(apiEndpoint, parsedResponse)}</code>
Â  Â  Â  Â  Â  Â  Â  Â  </pre>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  </div>


Â  Â  Â  Â  {/* Footer */}
Â  Â  Â  Â  <div className="px-6 py-4 border-t border-purple-500/20 bg-gray-900/30 flex items-center justify-between">
Â  Â  Â  Â  Â  <div className="flex items-center space-x-2 text-purple-300/70">
Â  Â  Â  Â  Â  Â  <Sparkles className="w-4 h-4" />
Â  Â  Â  Â  Â  Â  <span className="text-sm">Powered by Claude Integration Engine</span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <div className="flex items-center space-x-3">
Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  onClick={onClose}
Â  Â  Â  Â  Â  Â  Â  className="px-4 py-2 text-purple-300 hover:text-purple-100 transition-colors duration-200"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Cancel
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  onClick={handleIntegrate}
Â  Â  Â  Â  Â  Â  Â  disabled={!apiEndpoint || !jsonResponse || isGenerating}
Â  Â  Â  Â  Â  Â  Â  className="px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 disabled:from-gray-600 disabled:to-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 disabled:hover:scale-100 flex items-center space-x-2"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  {isGenerating ? (
Â  Â  Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Generating...</span>
Â  Â  Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <Zap className="w-4 h-4" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Integrate API</span>
Â  Â  Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>


Â  Â  Â  Â  {/* Animated background elements */}
Â  Â  Â  Â  <div className="absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden -z-10">
Â  Â  Â  Â  Â  <div className="absolute top-1/4 -left-10 w-20 h-20 bg-purple-500/10 rounded-full blur-xl animate-pulse" />
Â  Â  Â  Â  Â  <div className="absolute bottom-1/4 -right-10 w-16 h-16 bg-pink-500/10 rounded-full blur-xl animate-pulse delay-1000" />
Â  Â  Â  Â  Â  <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-32 h-32 bg-purple-500/5 rounded-full blur-2xl" />
Â  Â  Â  Â  </div>
Â  Â  Â  </div>


Â  Â  Â  {/* Global Styles for Animations */}
Â  Â  Â  <style jsx>{`
Â  Â  Â  Â  @keyframes modalEnter {
Â  Â  Â  Â  Â  from {
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  transform: scale(0.8) translateY(20px);
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  to {
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  Â  Â  transform: scale(1) translateY(0);
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  `}</style>
Â  Â  </div>
Â  );
}
```


ðŸ”§ Integration Engine


lib/integration-engine.ts


```typescript
import { Website, IntegrationConfig } from '@/types';


export class IntegrationEngine {
Â  private static instance: IntegrationEngine;


Â  static getInstance(): IntegrationEngine {
Â  Â  if (!IntegrationEngine.instance) {
Â  Â  Â  IntegrationEngine.instance = new IntegrationEngine();
Â  Â  }
Â  Â  return IntegrationEngine.instance;
Â  }


Â  public generateComponent(config: IntegrationConfig): string {
Â  Â  const { endpoint, response, instruction } = config;
Â  Â Â 
Â  Â  // Parse endpoint for dynamic parameters
Â  Â  const url = new URL(endpoint);
Â  Â  const params = Object.fromEntries(url.searchParams.entries());
Â  Â Â 
Â  Â  // Generate UI schema from response
Â  Â  const uiSchema = this.createUISchema(response);
Â  Â Â 
Â  Â  // Generate component based on instruction and schema
Â  Â  return this.buildReactComponent(endpoint, uiSchema, instruction);
Â  }


Â  private createUISchema(response: any) {
Â  Â  const schema: any = { fields: [], type: 'object' };
Â  Â Â 
Â  Â  if (typeof response === 'object' && response !== null) {
Â  Â  Â  Object.keys(response).forEach(key => {
Â  Â  Â  Â  const value = response[key];
Â  Â  Â  Â  const field = {
Â  Â  Â  Â  Â  key,
Â  Â  Â  Â  Â  label: this.formatLabel(key),
Â  Â  Â  Â  Â  type: Array.isArray(value) ? 'array' : typeof value,
Â  Â  Â  Â  Â  component: this.determineComponentType(key, value)
Â  Â  Â  Â  };
Â  Â  Â  Â  schema.fields.push(field);
Â  Â  Â  });
Â  Â  }
Â  Â Â 
Â  Â  return schema;
Â  }


Â  private determineComponentType(key: string, value: any): string {
Â  Â  if (Array.isArray(value)) {
Â  Â  Â  return 'grid';
Â  Â  }
Â  Â Â 
Â  Â  if (typeof value === 'number') {
Â  Â  Â  return 'metric';
Â  Â  }
Â  Â Â 
Â  Â  if (typeof value === 'string' && value.length > 50) {
Â  Â  Â  return 'textarea';
Â  Â  }
Â  Â Â 
Â  Â  if (key.toLowerCase().includes('image') || key.toLowerCase().includes('avatar')) {
Â  Â  Â  return 'image';
Â  Â  }
Â  Â Â 
Â  Â  return 'text';
Â  }


Â  private buildReactComponent(endpoint: string, schema: any, instruction: string): string {
Â  Â  return `
import { useState, useEffect } from 'react';


export function APIIntegration() {
Â  const [data, setData] = useState(null);
Â  const [loading, setLoading] = useState(true);
Â  const [error, setError] = useState(null);


Â  useEffect(() => {
Â  Â  fetchData();
Â  },Â Core UI Integration Modal with Dark Purple Theme

components/integrations/IntegrationModal.tsx

```tsx
'use client';

import { useState, useEffect } from 'react';
import { X, Sparkles, Zap, Code, Eye, Copy, Check } from 'lucide-react';

interface IntegrationModalProps {
isOpen: boolean;
onClose: () => void;
onIntegrationAdded: (integration: any) => void;
}

export function IntegrationModal({ isOpen, onClose, onIntegrationAdded }: IntegrationModalProps) {
const [activeTab, setActiveTab] = useState<'api' | 'preview' | 'code'>('api');
const [apiEndpoint, setApiEndpoint] = useState('');
const [jsonResponse, setJsonResponse] = useState('');
const [uiInstruction, setUiInstruction] = useState('');
const [isGenerating, setIsGenerating] = useState(false);
const [copiedField, setCopiedField] = useState<string | null>(null);
const [parsedResponse, setParsedResponse] = useState<any>(null);

// Sample API templates for quick start
const apiTemplates = [
{
name: 'Weather API',
endpoint: 'https://api.openweathermap.org/data/2.5/weather?q=London&appid=YOUR_API_KEY',
response: JSON.stringify({
weather: [{ main: 'Clear', description: 'clear sky', icon: '01d' }],
main: { temp: 15.5, feels_like: 14.8, humidity: 65 },
name: 'London'
}, null, 2)
},
{
name: 'News API',
endpoint: 'https://newsapi.org/v2/top-headlines?country=us&apiKey=YOUR_API_KEY',
response: JSON.stringify({
articles: [
{
title: 'Breaking News',
description: 'Important news story',
url: 'https://example.com',
publishedAt: '2024-01-01T00:00:00Z'
}
]
}, null, 2)
}
];

const copyToClipboard = async (text: string, field: string) => {
await navigator.clipboard.writeText(text);
setCopiedField(field);
setTimeout(() => setCopiedField(null), 2000);
};

const handleJsonChange = (value: string) => {
setJsonResponse(value);
try {
const parsed = JSON.parse(value);
setParsedResponse(parsed);
} catch {
setParsedResponse(null);
}
};

const handleIntegrate = async () => {
setIsGenerating(true);

// Simulate API processing with animation
await new Promise(resolve => setTimeout(resolve, 1500));

const integration = {
id: `integration-${Date.now()}`,
endpoint: apiEndpoint,
response: parsedResponse,
instruction: uiInstruction,
component: generateComponentCode(apiEndpoint, parsedResponse),
createdAt: new Date().toISOString()
};

onIntegrationAdded(integration);
setIsGenerating(false);
onClose();

// Reset form
setApiEndpoint('');
setJsonResponse('');
setUiInstruction('');
};

const generateComponentCode = (endpoint: string, response: any) => {
return `
// Auto-generated API Integration Component
import { useState, useEffect } from 'react';

export function APIIntegration() {
const [data, setData] = useState(null);
const [loading, setLoading] = useState(true);
const [error, setError] = useState(null);

useEffect(() => {
const fetchData = async () => {
try {
const response = await fetch('${endpoint}');
const result = await response.json();
setData(result);
} catch (err) {
setError(err.message);
} finally {
setLoading(false);
}
};

fetchData();
}, []);

if (loading) return <div className="loading-spinner">Loading...</div>;
if (error) return <div className="error-message">Error: {error}</div>;

return (
<div className="api-integration">
{/* Dynamic content based on API response */}
${response ? Object.keys(response).map(key =>
`<div key="${key}" className="data-field">
<strong>${key}:</strong> {data?.${key}}
</div>`
).join('\n ') : '<!-- No data structure -->'}
</div>
);
}
`.trim();
};

// Animation variants
const modalVariants = {
hidden: {
opacity: 0,
scale: 0.8,
y: 20
},
visible: {
opacity: 1,
scale: 1,
y: 0,
transition: {
type: "spring",
damping: 25,
stiffness: 300
}
},
exit: {
opacity: 0,
scale: 0.8,
y: -20,
transition: {
duration: 0.2
}
}
};

if (!isOpen) return null;

return (
<div className="fixed inset-0 z-50 flex items-center justify-center">
{/* Backdrop with blur and purple tint */}
<div
className="absolute inset-0 bg-black/60 backdrop-blur-sm"
onClick={onClose}
/>

{/* Modal Container */}
<div
className="relative w-full max-w-4xl mx-4 bg-gradient-to-br from-gray-900 to-purple-900/20 border border-purple-500/30 rounded-2xl shadow-2xl overflow-hidden"
style={{
animation: 'modalEnter 0.3s ease-out'
}}
>
{/* Header */}
<div className="relative p-6 border-b border-purple-500/20 bg-gradient-to-r from-purple-900/40 to-transparent">
<div className="flex items-center justify-between">
<div className="flex items-center space-x-3">
<div className="p-2 bg-purple-600/20 rounded-lg">
<Sparkles className="w-6 h-6 text-purple-400" />
</div>
<div>
<h2 className="text-2xl font-bold bg-gradient-to-r from-purple-200 to-pink-200 bg-clip-text text-transparent">
API Integration
</h2>
<p className="text-purple-300/80 text-sm mt-1">
Connect external services and data sources
</p>
</div>
</div>

<button
onClick={onClose}
className="p-2 hover:bg-purple-500/20 rounded-lg transition-all duration-200 group"
>
<X className="w-5 h-5 text-purple-300 group-hover:text-purple-100" />
</button>
</div>
</div>

{/* Tab Navigation */}
<div className="flex border-b border-purple-500/20 bg-gray-900/50">
{[
{ id: 'api' as const, label: 'API Configuration', icon: Zap },
{ id: 'preview' as const, label: 'Data Preview', icon: Eye },
{ id: 'code' as const, label: 'Generated Code', icon: Code }
].map(({ id, label, icon: Icon }) => (
<button
key={id}
onClick={() => setActiveTab(id)}
className={`flex items-center space-x-2 px-6 py-4 border-b-2 transition-all duration-200 ${
activeTab === id
? 'border-purple-400 text-purple-100 bg-purple-500/10'
: 'border-transparent text-purple-300/70 hover:text-purple-200 hover:bg-purple-500/5'
}`}
>
<Icon className="w-4 h-4" />
<span className="font-medium">{label}</span>
</button>
))}
</div>

{/* Content Area */}
<div className="p-6 max-h-[60vh] overflow-y-auto">
{/* API Configuration Tab */}
{activeTab === 'api' && (
<div className="space-y-6">
{/* Quick Templates */}
<div>
<label className="block text-sm font-medium text-purple-200 mb-3">
Quick Start Templates
</label>
<div className="grid grid-cols-2 gap-3">
{apiTemplates.map((template, index) => (
<button
key={index}
onClick={() => {
setApiEndpoint(template.endpoint);
setJsonResponse(template.response);
}}
className="p-3 text-left bg-purple-500/10 border border-purple-500/30 rounded-lg hover:bg-purple-500/20 transition-all duration-200 group"
>
<div className="flex items-center justify-between">
<span className="text-purple-100 font-medium group-hover:text-white">
{template.name}
</span>
<Copy className="w-4 h-4 text-purple-400 group-hover:text-purple-300" />
</div>
</button>
))}
</div>
</div>

{/* API Endpoint */}
<div>
<div className="flex items-center justify-between mb-3">
<label className="block text-sm font-medium text-purple-200">
API Endpoint URL
</label>
{apiEndpoint && (
<button
onClick={() => copyToClipboard(apiEndpoint, 'endpoint')}
className="flex items-center space-x-1 text-xs text-purple-400 hover:text-purple-300 transition-colors"
>
{copiedField === 'endpoint' ? (
<Check className="w-3 h-3" />
) : (
<Copy className="w-3 h-3" />
)}
<span>Copy</span>
</button>
)}
</div>
<input
type="text"
value={apiEndpoint}
onChange={(e) => setApiEndpoint(e.target.value)}
placeholder="https://api.example.com/v1/data?param=value"
className="w-full px-4 py-3 bg-gray-800/50 border border-purple-500/30 rounded-lg text-purple-100 placeholder-purple-400/60 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-transparent transition-all duration-200"
/>
</div>

{/* Sample Response */}
<div>
<div className="flex items-center justify-between mb-3">
<label className="block text-sm font-medium text-purple-200">
Sample JSON Response
</label>
{jsonResponse && (
<button
onClick={() => copyToClipboard(jsonResponse, 'response')}
className="flex items-center space-x-1 text-xs text-purple-400 hover:text-purple-300 transition-colors"
>
{copiedField === 'response' ? (
<Check className="w-3 h-3" />
) : (
<Copy className="w-3 h-3" />
)}
<span>Copy</span>
</button>
)}
</div>
<textarea
value={jsonResponse}
onChange={(e) => handleJsonChange(e.target.value)}
placeholder='{"key": "value", "data": [...]}'
rows={8}
className="w-full px-4 py-3 bg-gray-800/50 border border-purple-500/30 rounded-lg text-purple-100 placeholder-purple-400/60 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-transparent transition-all duration-200 font-mono text-sm"
/>
</div>

{/* UI Instructions */}
<div>
<label className="block text-sm font-medium text-purple-200 mb-3">
UI Integration Instructions
</label>
<textarea
value={uiInstruction}
onChange={(e) => setUiInstruction(e.target.value)}
placeholder="Describe how this data should be displayed... (e.g., 'Show as a grid of cards on the homepage')"
rows={3}
className="w-full px-4 py-3 bg-gray-800/50 border border-purple-500/30 rounded-lg text-purple-100 placeholder-purple-400/60 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-transparent transition-all duration-200"
/>
</div>
</div>
)}

{/* Data Preview Tab */}
{activeTab === 'preview' && parsedResponse && (
<div className="space-y-4">
<div className="p-4 bg-green-500/10 border border-green-500/30 rounded-lg">
<div className="flex items-center space-x-2 text-green-400">
<Check className="w-4 h-4" />
<span className="text-sm font-medium">Valid JSON Structure Detected</span>
</div>
</div>

<div className="bg-gray-800/30 border border-purple-500/20 rounded-lg overflow-hidden">
<div className="px-4 py-2 bg-gray-900/50 border-b border-purple-500/20">
<h3 className="text-purple-200 font-medium">Data Structure Preview</h3>
</div>
<pre className="p-4 text-purple-100 text-sm overflow-x-auto">
{JSON.stringify(parsedResponse, null, 2)}
</pre>
</div>

<div className="grid grid-cols-2 gap-4 text-sm">
<div className="p-3 bg-purple-500/10 rounded-lg">
<div className="text-purple-400">Root Keys</div>
<div className="text-purple-100 font-mono mt-1">
{Object.keys(parsedResponse).join(', ')}
</div>
</div>
<div className="p-3 bg-purple-500/10 rounded-lg">
<div className="text-purple-400">Data Type</div>
<div className="text-purple-100 font-mono mt-1">
{Array.isArray(parsedResponse) ? 'Array' : 'Object'}
</div>
</div>
</div>
</div>
)}

{/* Generated Code Tab */}
{activeTab === 'code' && apiEndpoint && (
<div className="space-y-4">
<div className="flex items-center justify-between">
<h3 className="text-purple-200 font-medium">Generated React Component</h3>
<button
onClick={() => copyToClipboard(generateComponentCode(apiEndpoint, parsedResponse), 'code')}
className="flex items-center space-x-2 px-3 py-1 bg-purple-500/20 border border-purple-500/30 rounded-lg text-purple-300 hover:text-purple-100 hover:bg-purple-500/30 transition-all duration-200"
>
{copiedField === 'code' ? (
<Check className="w-4 h-4" />
) : (
<Copy className="w-4 h-4" />
)}
<span className="text-sm">Copy Code</span>
</button>
</div>

<div className="bg-gray-900/50 border border-purple-500/20 rounded-lg overflow-hidden">
<pre className="p-4 text-purple-100 text-sm overflow-x-auto">
<code>{generateComponentCode(apiEndpoint, parsedResponse)}</code>
</pre>
</div>
</div>
)}
</div>

{/* Footer */}
<div className="px-6 py-4 border-t border-purple-500/20 bg-gray-900/30 flex items-center justify-between">
<div className="flex items-center space-x-2 text-purple-300/70">
<Sparkles className="w-4 h-4" />
<span className="text-sm">Powered by Claude Integration Engine</span>
</div>

<div className="flex items-center space-x-3">
<button
onClick={onClose}
className="px-4 py-2 text-purple-300 hover:text-purple-100 transition-colors duration-200"
>
Cancel
</button>

<button
onClick={handleIntegrate}
disabled={!apiEndpoint || !jsonResponse || isGenerating}
className="px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 disabled:from-gray-600 disabled:to-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 disabled:hover:scale-100 flex items-center space-x-2"
>
{isGenerating ? (
<>
<div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin" />
<span>Generating...</span>
</>
) : (
<>
<Zap className="w-4 h-4" />
<span>Integrate API</span>
</>
)}
</button>
</div>
</div>

{/* Animated background elements */}
<div className="absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden -z-10">
<div className="absolute top-1/4 -left-10 w-20 h-20 bg-purple-500/10 rounded-full blur-xl animate-pulse" />
<div className="absolute bottom-1/4 -right-10 w-16 h-16 bg-pink-500/10 rounded-full blur-xl animate-pulse delay-1000" />
<div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-32 h-32 bg-purple-500/5 rounded-full blur-2xl" />
</div>
</div>

{/* Global Styles for Animations */}
<style jsx>{`
@keyframes modalEnter {
from {
opacity: 0;
transform: scale(0.8) translateY(20px);
}
to {
opacity: 1;
transform: scale(1) translateY(0);
}
}
`}</style>
</div>
);
}
```

ðŸ”§ Integration Engine

lib/integration-engine.ts

```typescript
import { Website, IntegrationConfig } from '@/types';

export class IntegrationEngine {
private static instance: IntegrationEngine;

static getInstance(): IntegrationEngine {
if (!IntegrationEngine.instance) {
IntegrationEngine.instance = new IntegrationEngine();
}
return IntegrationEngine.instance;
}

public generateComponent(config: IntegrationConfig): string {
const { endpoint, response, instruction } = config;

// Parse endpoint for dynamic parameters
const url = new URL(endpoint);
const params = Object.fromEntries(url.searchParams.entries());

// Generate UI schema from response
const uiSchema = this.createUISchema(response);

// Generate component based on instruction and schema
return this.buildReactComponent(endpoint, uiSchema, instruction);
}

private createUISchema(response: any) {
const schema: any = { fields: [], type: 'object' };

if (typeof response === 'object' && response !== null) {
Object.keys(response).forEach(key => {
const value = response[key];
const field = {
key,
label: this.formatLabel(key),
type: Array.isArray(value) ? 'array' : typeof value,
component: this.determineComponentType(key, value)
};
schema.fields.push(field);
});
}

return schema;
}

private determineComponentType(key: string, value: any): string {
if (Array.isArray(value)) {
return 'grid';
}

if (typeof value === 'number') {
return 'metric';
}

if (typeof value === 'string' && value.length > 50) {
return 'textarea';
}

if (key.toLowerCase().includes('image') || key.toLowerCase().includes('avatar')) {
return 'image';
}

return 'text';
}

private buildReactComponent(endpoint: string, schema: any, instruction: string): string {
return `
import { useState, useEffect } from 'react';

export function APIIntegration() {
const [data, setData] = useState(null);
const [loading, setLoading] = useState(true);
const [error, setError] = useState(null);

useEffect(() => {
fetchData();
}, []);

const fetchData = async () => {
try {
const response = await fetch('${endpoint}');
if (!response.ok) throw new Error('API request failed');
const result = await response.json();
setData(result);
} catch (err) {
setError(err.message);
} finally {
setLoading(false);
}
};

if (loading) return (
<div className="flex items-center justify-center p-8">
<div className="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"></div>
</div>
);

if (error) return (
<div className="p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400">
Error: {error}
</div>
);

return (
<div className="api-integration space-y-4">
${schema.fields.map((field: any) => this.renderField(field)).join('\n ')}
</div>
);
}
`.trim();
}

private renderField(field: any): string {
switch (field.component) {
case 'grid':
return `<div className="grid grid-cols-1 md:grid-cols-2 gap-4">
{data?.${field.key}?.map((item, index) => (
<div key={index} className="p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg">
{/* Render grid item */}
</div>
))}
</div>`;

case 'metric':
return `<div className="p-4 bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-lg">
<div className="text-2xl font-bold text-purple-200">{data?.${field.key}}</div>
<div className="text-purple-400 text-sm">${field.label}</div>
</div>`;

default:
return `<div className="data-field">
<label className="text-purple-300 font-medium">${field.label}:</label>
<div className="text-purple-100 mt-1">{data?.${field.key}}</div>
</div>`;
}
}

private formatLabel(key: string): string {
return key
.replace(/([A-Z])/g, ' $1')
.replace(/_/g, ' ')
.replace(/\b\w/g, l => l.toUpperCase())
.trim();
}
}app/page.tsx


lib/integration-engine.ts


import { Website, IntegrationConfig } from '@/types';

export class IntegrationEngine {
private static instance: IntegrationEngine;

static getInstance(): IntegrationEngine {
if (!IntegrationEngine.instance) {
IntegrationEngine.instance = new IntegrationEngine();
}
return IntegrationEngine.instance;
}

public generateComponent(config: IntegrationConfig): string {
const { endpoint, response, instruction } = config;

// Parse endpoint for dynamic parameters
const url = new URL(endpoint);
const params = Object.fromEntries(url.searchParams.entries());

// Generate UI schema from response
const uiSchema = this.createUISchema(response);

// Generate component based on instruction and schema
return this.buildReactComponent(endpoint, uiSchema, instruction);
}

private createUISchema(response: any) {
const schema: any = { fields: [], type: 'object' };

if (typeof response === 'object' && response !== null) {
Object.keys(response).forEach(key => {
const value = response[key];
const field = {
key,
label: this.formatLabel(key),
type: Array.isArray(value) ? 'array' : typeof value,
component: this.determineComponentType(key, value)
};
schema.fields.push(field);
});
}

return schema;
}

private determineComponentType(key: string, value: any): string {
if (Array.isArray(value)) {
return 'grid';
}

if (typeof value === 'number') {
return 'metric';
}

if (typeof value === 'string' && value.length > 50) {
return 'textarea';
}

if (key.toLowerCase().includes('image') || key.toLowerCase().includes('avatar')) {
return 'image';
}

return 'text';
}

private buildReactComponent(endpoint: string, schema: any, instruction: string): string {
return `
import { useState, useEffect } from 'react';

export function APIIntegration() {
const [data, setData] = useState(null);
const [loading, setLoading] = useState(true);
const [error, setError] = useState(null);

useEffect(() => {
fetchData();
}, []);

const fetchData = async () => {
try {
const response = await fetch('${endpoint}');
if (!response.ok) throw new Error('API request failed');
const result = await response.json();
setData(result);
} catch (err) {
setError(err.message);
} finally {
setLoading(false);
}
};

if (loading) return (
<div className="flex items-center justify-center p-8">
<div className="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"></div>
</div>
);

if (error) return (
<div className="p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400">
Error: {error}
</div>
);

return (
<div className="api-integration space-y-4">
${schema.fields.map((field: any) => this.renderField(field)).join('\n ')}
</div>
);
}
`.trim();
}

private renderField(field: any): string {
switch (field.component) {
case 'grid':
return `<div className="grid grid-cols-1 md:grid-cols-2 gap-4">
{data?.${field.key}?.map((item, index) => (
<div key={index} className="p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg">
{/* Render grid item */}
</div>
))}
</div>`;

case 'metric':
return `<div className="p-4 bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-lg">
<div className="text-2xl font-bold text-purple-200">{data?.${field.key}}</div>
<div className="text-purple-400 text-sm">${field.label}</div>
</div>`;

default:
return `<div className="data-field">
<label className="text-purple-300 font-medium">${field.label}:</label>
<div className="text-purple-100 mt-1">{data?.${field.key}}</div>
</div>`;
}
}

private formatLabel(key: string): string {
return key
.replace(/([A-Z])/g, ' $1')
.replace(/_/g, ' ')
.replace(/\b\w/g, l => l.toUpperCase())
.trim();
}
}


Usage in Main Builder: // Add to your imports
import { IntegrationModal } from '@/components/integrations/IntegrationModal';


// Add to your component state
const [isIntegrationModalOpen, setIsIntegrationModalOpen] = useState(false);
const [integrations, setIntegrations] = useState<any[]>([]);


// Add to your UI (in the builder section)
<button
Â  onClick={() => setIsIntegrationModalOpen(true)}
Â  className="group flex items-center space-x-2 px-4 py-3 bg-gradient-to-r from-purple-600/20 to-pink-600/20 border border-purple-500/30 rounded-lg hover:from-purple-600/30 hover:to-pink-600/30 transition-all duration-200 hover:scale-105"
>
Â  <Zap className="w-5 h-5 text-purple-400 group-hover:text-purple-300" />
Â  <span className="text-purple-200 font-medium">Add API Integration</span>
</button>


<IntegrationModal
Â  isOpen={isIntegrationModalOpen}
Â  onClose={() => setIsIntegrationModalOpen(false)}
Â  onIntegrationAdded={(integration) => {
Â  Â  setIntegrations([...integrations, integration]);
Â  }}
/>





